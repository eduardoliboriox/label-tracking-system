{% extends "base.html" %}
{% block content %}
  <h3>{{ 'Editar dados' if model else 'Nova Ordem' }}</h3>
  <form method="post">
    <div class="row">
      <div class="col-md-3 mb-2">
        <label>CÃ³digo</label>
        <input name="code" class="form-control" required value="{{ model['code'] if model else '' }}">
      </div>
      <div class="col-md-4 mb-2">
        <label>Modelo</label>
        <input name="model_name" class="form-control" value="{{ model['model_name'] if model else '' }}">
      </div>
      <div class="col-md-5 mb-2">
        <label>Cliente</label>
        <input name="cliente" class="form-control" value="{{ model['cliente'] if model else '' }}">
      </div>
    </div>

    <div class="row">
      <div class="col-md-2">
        <label>Linha</label>
        <input name="linha" class="form-control" value="{{ model['linha'] if model else '' }}">
      </div>

      <div class="col-md-2">
        <label>Setor</label>
        <select name="setor" class="form-control">
          {% for s in ['SMT', 'PTH', 'IM', 'PA', 'VTT'] %}
            <option value="{{ s }}" {% if model and model['setor'] == s %}selected{% endif %}>{{ s }}</option>
          {% endfor %}
        </select>
      </div>

      <div class="col-md-2">
        <label>Fase</label>
        <select name="fase" class="form-control">
          {% for f in ['PCB', 'TOP', 'BOTTOM'] %}
            <option value="{{ f }}" {% if model and model['fase'] == f %}selected{% endif %}>{{ f }}</option>
          {% endfor %}
        </select>
      </div>

      <div class="col-md-2">
        <label>Turno</label>
        <select name="turno" class="form-control" required>
          {% for t in ['1Â° TURNO', '2Â° TURNO', '3Â° TURNO'] %}
            <option value="{{ t }}" {% if model and model['turno'] == t %}selected{% endif %}>{{ t }}</option>
          {% endfor %}
        </select>
      </div>

      <div class="col-md-3">
        <label>Data</label>
        <input name="data" class="form-control" value="{{ model['data'] if model else '' }}">
      </div>
    </div>

 <div class="row">
  <div class="col-md-3">
    <label>Lote</label>
    <input id="lote_principal" name="lote" class="form-control" value="{{ model['lote'] if model else '' }}">
  </div>
  <div class="col-md-3">
    <label>Quantidade</label>
    <input name="quantidade" class="form-control" value="{{ model['quantidade'] if model else '' }}">
  </div>
  <div class="col-md-3">
    <label>Revisor(a)</label>
    <input name="revisora" class="form-control" value="{{ model['revisora'] if model else '' }}">
  </div>
  <div class="col-md-3">
    <label>OP</label>
    <input name="op" class="form-control" value="{{ model['op'] if model else '' }}">
  </div>
</div>

<div class="row">
  <div class="col-md-3">
    <label>HorÃ¡rio</label>
    <input name="horario" class="form-control" value="{{ model['horario'] if model else '' }}">
  </div>
  <div class="col-md-3">
    <label>Lote#</label>
    <input name="po" class="form-control" value="{{ model['po'] if model else '' }}">
  </div>
</div>

<input type="hidden" id="lote_num" name="lote_num">


<div class="mb-3">
  <label for="lote_padrao" class="form-label">Lote (padrÃ£o)</label>
  <input type="text" class="form-control" id="lote_padrao" name="lote_padrao" placeholder="Ex: 900" required>
</div>

<div class="mb-2">
  <label>Obs.</label>
  <input name="obs" class="form-control" value="{{ model['obs'] if model else '' }}">
</div>

<button class="btn btn-success">Salvar</button>
<a href="{{ url_for('index') }}" class="btn btn-secondary">Cancelar</a>
</form>

<!-- ðŸ”¹ SCRIPT PARA COPIAR O VALOR DO LOTE -->
<script>
  const lotePrincipal = document.getElementById('lote_principal');
  const loteNumeroInicial = document.getElementById('lote_num');

  if (lotePrincipal && loteNumeroInicial) {
    lotePrincipal.addEventListener('input', () => {
      loteNumeroInicial.value = lotePrincipal.value;
    });
  }
</script>
{% endblock %}
